(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"06bf":function(t,e,n){},"08b9":function(t,e,n){"use strict";var o=n("06bf"),i=n.n(o);i.a},"0906":function(t,e,n){"use strict";(function(t){n("8824");o(n("66fd"));var e=o(n("d0f5"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"7d24":function(t,e,n){"use strict";n.r(e);var o=n("fbbe"),i=n.n(o);for(var c in o)"default"!==c&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=i.a},bfec:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c},c=[]},d0f5:function(t,e,n){"use strict";n.r(e);var o=n("bfec"),i=n("7d24");for(var c in i)"default"!==c&&function(t){n.d(e,t,(function(){return i[t]}))}(c);n("08b9");var a,r=n("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},fbbe:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=h(n("a29e")),i=(h(n("5aaf")),n("53c2")),c=n("ace8"),a=n("0cf1"),r=n("26cb"),s=n("78a2"),u=n("7a16"),d=n("d5f7"),l=n("5f9b");function h(t){return t&&t.__esModule?t:{default:t}}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=getApp(),p=function(){Promise.all([n.e("common/vendor"),n.e("components/couponWindow/index")]).then(function(){return resolve(n("58a5"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("pages/index/components/skeletons").then(function(){return resolve(n("17ca"))}.bind(null,n)).catch(n.oe)},b=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/userInfor")]).then(function(){return resolve(n("e704"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("pages/index/components/newVip").then(function(){return resolve(n("7c8a"))}.bind(null,n)).catch(n.oe)},S=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/shortVideo")]).then(function(){return resolve(n("293d"))}.bind(null,n)).catch(n.oe)},x=function(){n.e("pages/index/components/activeParty").then(function(){return resolve(n("4bcc"))}.bind(null,n)).catch(n.oe)},w=function(){n.e("pages/index/components/headerSerch").then(function(){return resolve(n("80c6"))}.bind(null,n)).catch(n.oe)},y=function(){n.e("pages/index/components/swipers").then(function(){return resolve(n("af7d"))}.bind(null,n)).catch(n.oe)},P=function(){n.e("pages/index/components/coupon").then(function(){return resolve(n("61ab"))}.bind(null,n)).catch(n.oe)},L=function(){n.e("pages/index/components/articleList").then(function(){return resolve(n("b24e"))}.bind(null,n)).catch(n.oe)},_=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/bargain")]).then(function(){return resolve(n("53e5"))}.bind(null,n)).catch(n.oe)},T=function(){n.e("pages/index/components/blankPage").then(function(){return resolve(n("f2d7"))}.bind(null,n)).catch(n.oe)},C=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/combination")]).then(function(){return resolve(n("94c7"))}.bind(null,n)).catch(n.oe)},I=function(){n.e("pages/index/components/customerService").then(function(){return resolve(n("b5a1"))}.bind(null,n)).catch(n.oe)},D=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/goodList")]).then(function(){return resolve(n("c961"))}.bind(null,n)).catch(n.oe)},k=function(){n.e("pages/index/components/guide").then(function(){return resolve(n("e7db"))}.bind(null,n)).catch(n.oe)},N=function(){n.e("pages/index/components/liveBroadcast").then(function(){return resolve(n("109c"))}.bind(null,n)).catch(n.oe)},O=function(){n.e("pages/index/components/menus").then(function(){return resolve(n("3893"))}.bind(null,n)).catch(n.oe)},B=function(){n.e("pages/index/components/news").then(function(){return resolve(n("7fc5"))}.bind(null,n)).catch(n.oe)},U=function(){n.e("pages/index/components/pictureCube").then(function(){return resolve(n("fae6"))}.bind(null,n)).catch(n.oe)},E=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/promotionList")]).then(function(){return resolve(n("650b"))}.bind(null,n)).catch(n.oe)},R=function(){n.e("pages/index/components/richText").then(function(){return resolve(n("0dc6"))}.bind(null,n)).catch(n.oe)},j=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/seckill")]).then(function(){return resolve(n("146f"))}.bind(null,n)).catch(n.oe)},A=function(){n.e("pages/index/components/swiperBg").then(function(){return resolve(n("3ecf"))}.bind(null,n)).catch(n.oe)},G=function(){Promise.all([n.e("common/vendor"),n.e("pages/index/components/tabNav")]).then(function(){return resolve(n("969c"))}.bind(null,n)).catch(n.oe)},H=function(){n.e("pages/index/components/titles").then(function(){return resolve(n("ac3e"))}.bind(null,n)).catch(n.oe)},$=function(){Promise.all([n.e("common/vendor"),n.e("components/pageFooter/index")]).then(function(){return resolve(n("9f8d"))}.bind(null,n)).catch(n.oe)},M=function(){n.e("components/Loading/index").then(function(){return resolve(n("ba9d"))}.bind(null,n)).catch(n.oe)},V=function(){Promise.all([n.e("common/vendor"),n.e("components/recommend/index")]).then(function(){return resolve(n("6019"))}.bind(null,n)).catch(n.oe)},F={computed:(0,r.mapGetters)(["isLogin","uid","cartNum"]),mixins:[o.default],components:{skeletons:m,recommend:V,Loading:M,pageFooter:$,couponWindow:p,newVip:v,userInfor:b,shortVideo:S,activeParty:x,headerSerch:w,swipers:y,coupon:P,articleList:L,bargain:_,blankPage:T,combination:C,customerService:I,goodList:D,guide:k,liveBroadcast:N,menus:O,pictureCube:U,news:B,promotionList:E,richText:R,seckill:j,swiperBg:A,tabNav:G,titles:H},data:function(){var t;return t={showSkeleton:!0,styleConfig:[],loading:!1,loadend:!1,loadTitle:"下拉加载更多",page:1,limit:this.$config.LIMIT,numConfig:0,code:"",isCouponShow:!1,couponObj:{},couponObjs:{show:!1},shareInfo:{},footConfig:{},isSortType:0,sortList:"",sortAll:[],goodPage:1,goodList:[],sid:0,curSort:0,sortMpTop:0,loaded:!1},g(t,"loading",!1),g(t,"hostProduct",[]),g(t,"hotScroll",!1),g(t,"hotPage",1),g(t,"hotLimit",10),g(t,"domOffsetTop",50),g(t,"isFixed",!0),g(t,"site_config",""),g(t,"errorNetwork",!1),g(t,"footerStatus",!1),g(t,"isHeaderSerch",!1),g(t,"bgColor",""),g(t,"bgPic",""),g(t,"bgTabVal",""),g(t,"pageShow",!0),g(t,"windowHeight",0),g(t,"imgHost",l.HTTP_REQUEST_URL),t},onLoad:function(e){var n=this,o=this;o.getOptions(e),this.$nextTick((function(){t.getSystemInfo({success:function(t){o.windowHeight=t.windowHeight}})}));e.state,e.scope;this.diyData(),this.getIndexData(),this.getTemlIds(),(0,c.getShare)().then((function(t){n.shareInfo=t.data})),this.getCopyRight()},watch:{isLogin:{deep:!0,handler:function(e,n){var o=(new Date).toLocaleDateString();if(e){try{var i=t.getStorageSync("oldDate")||""}catch(c){}i!=o&&this.getCoupon()}}}},onShow:function(){this.cartNum>0?t.setTabBarBadge({index:2,text:this.cartNum+""}):t.hideTabBarRedDot({index:2}),t.removeStorageSync("form_type_cart"),this.isLogin&&this.getCoupon(),this.getdiyProduct()},onReady:function(){},methods:{getdiyProduct:function(){(0,s.diyProduct)().then((function(e){t.setStorageSync("diyProduct",JSON.stringify(e.data.product_detail))}))},getCopyRight:function(){var e=this;(0,i.copyRight)().then((function(n){var o=n.data;e.site_config=o.record_No,o.copyrightContext||(o.copyrightImage="/static/images/support.png"),t.setStorageSync("copyNameInfo",o.copyrightContext),t.setStorageSync("copyImageInfo",o.copyrightImage)})).catch((function(t){return e.$util.Tips({title:t.msg})}))},getOptions:function(t){var e=this;if(t.scene){var n=e.$util.getUrlParams(decodeURIComponent(t.scene));n.pid&&(f.globalData.spid=n.pid)}t.pid&&(f.globalData.spid=t.pid)},reconnect:function(){var e=this;t.showLoading({title:"加载中"}),this.diyData(),this.getIndexData(),(0,c.getShare)().then((function(t){e.shareInfo=t.data}))},goICP:function(){t.navigateTo({url:"/pages/annex/web_view/index?url=https://beian.miit.gov.cn/"})},bindHeighta:function(t){},bindHeight:function(e){t.hideLoading(),this.domOffsetTop=e.top},goGoodsDetail:function(e){(0,u.goShopDetail)(e,this.uid).then((function(n){t.navigateTo({url:"/pages/goods_details/index?id=".concat(e.id)})}))},get_host_product:function(){var t=this;t.hotScroll||(0,s.getProductHot)(t.hotPage,t.hotLimit).then((function(e){t.hotPage++,t.hotScroll=e.data.length<t.hotLimit,t.hostProduct=t.hostProduct.concat(e.data)}))},changeSort:function(t,e){this.curSort!=e&&(this.curSort=e,this.sid=t.id,this.goodList=[],this.goodPage=1,this.loaded=!1,this.getGoodsList())},bindSortId:function(t){this.isSortType=-99==t?0:1,this.getProductList(t),0==this.hostProduct.length&&this.get_host_product()},getProductList:function(t){var e=this;this.curSort=0,this.loaded=!1,this.sortAll.length>0?(this.sortAll.forEach((function(n,o){n.id==t&&(e.$set(e,"sortList",n),e.sid=n.children.length?n.children[0].id:"")})),this.goodList=[],this.goodPage=1,this.$nextTick((function(){""!=e.sortList&&e.getGoodsList()}))):(0,s.getCategoryList)().then((function(n){e.sortAll=n.data,n.data.forEach((function(n,o){n.id==t&&(e.sortList=n,e.sid=n.children.length?n.children[0].id:"")})),e.goodList=[],e.goodPage=1,e.$nextTick((function(){""!=e.sortList&&e.getGoodsList()}))}))},getGoodsList:function(){var t=this;this.loading||this.loaded||(this.loading=!0,(0,s.getProductslist)({sid:this.sid,keyword:"",priceOrder:"",salesOrder:"",news:0,page:this.goodPage,limit:10,cid:this.sortList.id}).then((function(e){t.loading=!1,t.loaded=e.data.length<10,t.goodPage++,t.goodList=t.goodList.concat(e.data)})))},getNewCoupon:function(){var e=this,n=t.getStorageSync("oldUser")||0;n||(0,i.getCouponNewUser)().then((function(n){var o=n.data;o.show?o.list.length&&(e.isCouponShow=!0,e.couponObj=o,t.setStorageSync("oldUser",1)):t.setStorageSync("oldUser",1)}))},getCoupon:function(){var e=this,n=t.getStorageSync("tagDate")||"",o=(new Date).toLocaleDateString();n===o?this.getNewCoupon():(0,i.getCouponV2)().then((function(n){var o=n.data;o.list.length?(e.isCouponShow=!0,e.couponObj=o,t.setStorageSync("tagDate",(new Date).toLocaleDateString())):e.getNewCoupon()}))},couponClose:function(){this.isCouponShow=!1,t.getStorageSync("oldUser")||this.getNewCoupon()},onLoadFun:function(){},getTemlIds:function(){var t=wx.getStorageSync(a.SUBSCRIBE_MESSAGE);t||(0,i.getTemlIds)().then((function(t){t.data&&wx.setStorageSync(a.SUBSCRIBE_MESSAGE,JSON.stringify(t.data))}))},objToArr:function(t){var e=Object.keys(t),n=e.map((function(e){return t[e]}));return n},diyData:function(){var e=this,n=this;(0,i.getDiy)(0).then((function(o){e.errorNetwork=!1;var i=o.data;i.is_bg_color&&(e.bgColor=i.color_picker),i.is_bg_pic&&(e.bgPic=i.bg_pic,e.bgTabVal=i.bg_tab_val),e.pageShow=i.is_show,t.setNavigationBarTitle({title:o.data.title});var c=[],a=n.objToArr(o.data.value);function r(t,e){return t.timestamp-e.timestamp}a.forEach((function(t,n,o){"headerSerch"==t.name&&(e.isHeaderSerch=!0),"pageFoot"==t.name&&o.splice(n,1),t.name,c=o})),c.sort(r),n.styleConfig=c,e.showSkeleton=!1})).catch((function(t){}))},getIndexData:function(){},changeBarg:function(e){this.isLogin?t.navigateTo({url:"/pages/activity/goods_bargain_details/index?id=".concat(e.id,"&bargain=").concat(this.$store.state.app.uid)}):(0,d.toLogin)()},goDetail:function(e){(0,u.goShopDetail)(e,this.$store.state.app.uid).then((function(n){t.navigateTo({url:"/pages/goods_details/index?id=".concat(e.id)})}))}},onReachBottom:function(){0==this.isSortType||this.getGoodsList()},onPageScroll:function(t){},onShareAppMessage:function(){var t=this.uid?this.uid:0;return{title:this.shareInfo.title,path:"/pages/index/index?pid="+t}},onShareTimeline:function(){return{title:this.shareInfo.title,path:"/pages/index/index"}}};e.default=F}).call(this,n("543d")["default"])}},[["0906","common/runtime","common/vendor"]]]);