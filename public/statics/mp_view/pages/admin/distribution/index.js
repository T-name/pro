require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/distribution/index"],{"3c57":function(t,i,e){"use strict";(function(t){e("8824");n(e("66fd"));var i=n(e("509b"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])},"509b":function(t,i,e){"use strict";e.r(i);var n=e("e914"),s=e("d4de");for(var a in s)"default"!==a&&function(t){e.d(i,t,(function(){return s[t]}))}(a);e("6c1d");var o,d=e("f0c5"),r=Object(d["a"])(s["default"],n["b"],n["c"],!1,null,"86adcbde",null,!1,n["a"],o);i["default"]=r.exports},"6c1d":function(t,i,e){"use strict";var n=e("89da"),s=e.n(n);s.a},"88cd":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("5a52"),s=e("5f9b"),a=function(){e.e("components/Loading/index").then(function(){return resolve(e("ba9d"))}.bind(null,e)).catch(e.oe)},o={name:"adminOrder",components:{Loading:a},data:function(){return{hidden:!0,index:0,detailtabs:"today",footer:"list",type:"1",arrays:[],array:[],storeInfoid:0,census:{},list:[],orderlist:[],count:{},page:1,limit:15,loaded:!1,loading:!1,user:{},ids:"",verify_code:"",imgHost:s.HTTP_REQUEST_URL}},onLoad:function(){this.userInfo(),this.footerTab("list")},methods:{userInfo:function(){var t=this;(0,n.deliveryInfo)().then((function(i){t.user=i.data,t.array=i.data.store_info.map((function(t){return t})),t.arrays=i.data.store_info.map((function(t){return t.name}));var e={id:0,name:"全部"};t.array.unshift(e),t.arrays.unshift(e.name)}))},getStatistics:function(){var t=this,i={store_id:this.storeInfoid,data:this.detailtabs};(0,n.deliveryStatistics)(i).then((function(i){t.census=i.data}))},deliveryLists:function(){var t=this,i={page:this.page,limit:this.limit,store_id:this.storeInfoid,data:this.detailtabs};this.loading||this.loaded||(this.loading=!0,(0,n.deliveryList)(i).then((function(i){t.loading=!1,t.loaded=i.data.length<t.limit,t.page+=1,t.list.push.apply(t.list,i.data)})))},getOrderList:function(){var t=this;this.loading||this.loaded||(this.loading=!0,(0,n.deliveryOrderList)({type:this.type,page:this.page,limit:this.limit}).then((function(i){t.loading=!1,t.count=i.data.data,t.loaded=i.data.list.length<t.limit,t.page+=1,t.orderlist.push.apply(t.orderlist,i.data.list)})))},init:function(){this.orderlist=[],this.list=[],this.page=1,this.loaded=!1,this.loading=!1},to:function(){var i=this;t.scanCode({scanType:["qrCode","barCode"],success:function(t){i.verify_code=t.result,i.codeChange()},fail:function(t){}})},codeChange:function(){var i=this,e=/^[0-9]*$/;return this.verify_code?e.test(this.verify_code)?(i.$util.Tips({title:"查询中"}),void setTimeout((function(){(0,n.orderWriteoffInfo)(2,{verify_code:i.verify_code,code_type:2}).then((function(e){200==e.status?t.navigateTo({url:"./scanning/index?code="+i.verify_code}):i.$util.Tips({title:e.msg})})).catch((function(t){i.$util.Tips({title:t})}))}),800)):i.$util.Tips({title:"请输入正确的核销码"}):i.$util.Tips({title:"请输入核销码"})},footerTab:function(t){this.footer=t,this.init(),"tongji"==t&&(this.deliveryLists(),this.getStatistics()),"list"==t&&this.getOrderList()},tab:function(t){this.type=t,this.init(),this.getOrderList()},hiddened:function(t){this.hidden=!this.hidden},cancel:function(){this.hidden=!this.hidden},bindPickerChange:function(t){this.hidden=!this.hidden,this.index=t.target.value,this.storeInfoid=this.array[this.index].id,this.init(),this.getStatistics(),this.deliveryLists()},detailtab:function(t){this.detailtabs=t,this.init(),this.deliveryLists(),this.getStatistics()},jump:function(i){t.navigateTo({url:"orderDetail/index?id="+i})}},onReachBottom:function(){"tongji"==this.footer&&this.deliveryList(),"list"==this.footer&&this.getOrderList()}};i.default=o}).call(this,e("543d")["default"])},"89da":function(t,i,e){},d4de:function(t,i,e){"use strict";e.r(i);var n=e("88cd"),s=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=s.a},e914:function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var s=function(){var t=this,i=t.$createElement;t._self._c},a=[]}},[["3c57","common/runtime","common/vendor"]]]);