require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_integral/index"],{"282d":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.userInfo.clear_integral>0&&t.userInfo.clear_time>0?t._f("dateFormat")(t.userInfo.clear_time):null);t.$mp.data=Object.assign({},{$root:{f0:n}})},o=[]},"4d34":function(t,e,n){"use strict";n.r(e);var i=n("dea3"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"7dc2":function(t,e,n){"use strict";n.r(e);var i=n("282d"),a=n("4d34");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("87e7");var r,u=n("f0c5"),c=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"05b65369",null,!1,i["a"],r);e["default"]=c.exports},"7e2c":function(t,e,n){},"87e7":function(t,e,n){"use strict";var i=n("7e2c"),a=n.n(i);a.a},ce97:function(t,e,n){"use strict";(function(t){n("8824");i(n("66fd"));var e=i(n("7dc2"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},dea3:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("99c8"),a=c(n("3013")),o=n("d5f7"),r=n("26cb"),u=c(n("a29e"));function c(t){return t&&t.__esModule?t:{default:t}}var s=function(){Promise.all([n.e("common/vendor"),n.e("components/home/index")]).then(function(){return resolve(n("d878"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/emptyPage").then(function(){return resolve(n("781a"))}.bind(null,n)).catch(n.oe)},f={components:{emptyPage:l,home:s},filters:{dateFormat:function(t){return(0,a.default)(1e3*t).format("YYYY-MM-DD")}},mixins:[u.default],data:function(){return{navList:[{name:"分值明细",icon:"icon-mingxi"},{name:"分值提升",icon:"icon-tishengfenzhi"}],current:0,page:1,limit:10,integralList:[],userInfo:{},loadend:!1,loading:!1,loadTitle:"加载更多",isAuto:!1,isShowAuth:!1,isTime:0}},computed:(0,r.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,e){t&&(this.getUserInfo(),this.getIntegralList())},deep:!0}},onLoad:function(){this.isLogin?(this.getUserInfo(),this.getIntegralList()):(0,o.toLogin)()},onShow:function(){t.removeStorageSync("form_type_cart")},onReachBottom:function(){this.getIntegralList()},methods:{onLoadFun:function(){this.getUserInfo(),this.getIntegralList()},authColse:function(t){this.isShowAuth=t},getUserInfo:function(){var t=this;(0,i.postSignUser)({sign:1,integral:1,all:1}).then((function(e){t.$set(t,"userInfo",e.data);var n=e.data.clear_time,i=n-1209600,a=Date.parse(new Date)/1e3;t.isTime=i<a?1:0}))},getIntegralList:function(){var t=this;t.loading||t.loadend||(t.loading=!0,t.loadTitle="",(0,i.getIntegralList)({page:t.page,limit:t.limit}).then((function(e){var n=e.data,i=n.length<t.limit;t.integralList=t.$util.SplitArray(n,t.integralList),t.$set(t,"integralList",t.integralList),t.page=t.page+1,t.loading=!1,t.loadend=i,t.loadTitle=i?"没有更多内容啦~":"加载更多"}),(function(e){this.loading=!1,t.loadTitle="加载更多"})))},nav:function(t){this.current=t}}};e.default=f}).call(this,n("543d")["default"])}},[["ce97","common/runtime","common/vendor"]]]);